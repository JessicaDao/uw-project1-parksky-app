<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>title</title>
	
	<!-- <link rel="stylesheet" href="css/styles.css"> -->
	<style>
		div {
			box-sizing: border-box;
			padding: 1rem;
			background-color: pink;
		}
		/*div + div {
			margin-top: 4rem;
		}*/

		div:first-child {
			float: left;
			max-width: 75%;
		}

		#starInfo {
			float: right;
			max-width: 25%;
		}
	</style>
</head>
<body>
<div id="parkInfo"></div>
<div id="starInfo">
	<div id="extract"></div>
	<div id="infobox"></div>
</div>
<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>
<script type="text/javascript">
$(document).ready(function() {
	var parkCode = "acad";
	var pageTitle = "Castor_(star)";

	function getParkInfo(parkCode) {
		$("#parkInfo").text("park info goes here");
		var queryURL = `https://developer.nps.gov/api/v1/parks?api_key=0tCiHZSCrzRaYEYoMSn3NMBWl6rcnX3Z2HDqaeMg&parkCode=${parkCode}`;
		$.ajax({
			url: queryURL,
			method: "GET"
		}).then(function(res) {
			$("#parkInfo").html("");
			// will include entrance fees / passes, operating hours, contact info, etc.
			var descrip = res.data[0].description;
			$("#parkInfo").html(descrip);

			getExtract("Acadia National Park", "parkInfo");
		});
	}
	
	function getExtract(title, target) {
		var queryURL = `https://en.wikipedia.org/w/api.php?action=query&origin=*&format=json&prop=extracts&exintro=&titles=${title}`;
		// generator=search&gsrlimit=5&gsrsearch

		$.ajax({
	    url: queryURL,
	    method: "GET"
	  }).then(function(res) {
	  	// console.log(res);
	  	var pages = res.query.pages;
	  	// console.log(res.query.pages);

	  	if(target == "extract") {
	  		for(var i in res.query.pages) {
		  		$("#extract").append(pages[i].extract);
		  	}
	  	} else {
	  		for(var i in res.query.pages) {
		  		$("#parkInfo").append(pages[i].extract);
		  	}
	  	}
	  });
	}

	function getInfobox(title) {
		$("#infobox").text("infobox goes here");
		// https://stackoverflow.com/questions/36461360/wikipedia-api-infobox
		// uses REST API found here: https://en.wikipedia.org/api/rest_v1/
		var queryURL = `https://en.wikipedia.org/api/rest_v1/page/segments/${title}`;

		$.ajax({
	    url: queryURL,
	    method: "GET"
	  }).then(function(res) {
	  	// console.log(res);
	  	$("#infobox").html("");

	  	// https://stackoverflow.com/a/21870431
	  	// this is the easiest way to pull a single element out of the HTML
	  	// returned by the infoboxQuery URL; we'll have to test with pages that
	  	// have other tables on them, but I'm sure it will work
	  	var parser = new DOMParser();
	  	var htmlDoc = parser.parseFromString(res.segmentedContent, 'text/html');
	  	var infobox = htmlDoc.getElementsByTagName('table');
	  	$("#infobox").html(infobox);

	  });
	}

	getExtract(pageTitle, "extract");
  getInfobox(pageTitle);
  getParkInfo(parkCode);
});

</script>
</body>
</html>