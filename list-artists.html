<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>REGIONAL MUSIC APP</title>
	
	<!-- <link rel="stylesheet" href="css/styles.css"> -->
	<style>
		body {
			padding: 0 25%;
		}

		#country {
			/*font-variant: small-caps;*/
			text-align: center;
		}

		button {
			display: block;
			margin: 0 auto;
		}

		.artist-info-block {
			clear: both;
		}

		.artist-info-block + .artist-info-block {
			border-top: 1px solid gainsboro;
		}

		.artist-info-block h3,
		.artist-info-block img {
			vertical-align: middle;
			display: inline-block;
		}

		.artist-info-block img {
			margin-right: 1rem;
		}

	</style>
</head>
<body>
	<h1 id="country"></h1>
	<button id="ToggleSpotifyLastFM" value="LastFM">Spotify/LastFM</button>
<div id="artists"></div>

<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>

<script type="text/javascript">
$(document).ready(function() {
	var lastFMKey = "a723aea02ace235108c8be962d7c5aa8";
	var spotifyKey = "";

	var region = "India";
	$("#country").text(region);

	function getLastFMArtistsByRegion(region) {
		$("#artists").empty();
		
		var queryURL = `http://ws.audioscrobbler.com/2.0/?method=geo.gettopartists&country=${region}&api_key=${lastFMKey}&format=json`;

		$.ajax({
      url: queryURL,
      method: "GET"
    }).then(function(response) {
    	console.log(response.topartists.artist);
    	var artists = response.topartists.artist;

    	$("#country").empty().text(`${region}: LastFM`);

    	for(var i = 0; i < 10; i++) {
    		var artistBlock = $("<div>", {class: "artist-info-block"});
    		var artistName = $("<h3>");
    		artistName.text(artists[i].name);
    		var artistImage = $("<img>");
    		artistImage.attr("src", artists[i].image[0]["#text"]);
    		artistBlock.append(artistImage,artistName);
    		$("#artists").append(artistBlock);
    	}
    });

	}

	function getSpotifyArtistByRegion(region) {
		/**
		 * France Top 50: 37i9dQZEVXbIPWwFssbupI
		 */
		var queryURL = "https://open.spotify.com/user/spotify/playlist/37i9dQZEVXbIPWwFssbupI";

		$("#country").empty().text(`${region}: Spotify`);
		$("#artists").text("Spotify Search NOT Working Yet :(");

	// 	// $.ajax({
 //  //     url: queryURL,
 //  //     method: "GET"
 //  //   }).then(function(response) {
 //  //   	console.log(response);
 //  //   });
	// }

	$("#ToggleSpotifyLastFM").click(function(e) {
		e.preventDefault();
		console.log($(this).val());
		if($(this).val() === "LastFM") {
			$(this).val("Spotify");
			getSpotifyArtistByRegion(region);
		} else {
			$(this).val("LastFM");
			getLastFMArtistsByRegion(region);
		}
	});

	getLastFMArtistsByRegion(region);
});
</script>
</body>
</html>